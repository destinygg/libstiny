@use "../tokens/component" as *;
@use "../tokens/core" as *;
@use "../tokens/semantic" as *;
@use "../tokens/shadows" as *;
@use "../tokens/typography" as *;
@use "../utils/transitions" as *;

.checkbox {
  display: grid;
  grid-template-columns: $checkbox-width auto;
  cursor: pointer;
  gap: $checkbox-gap;
  align-items: center;

  input {
    appearance: none;
    margin: 0;
    position: absolute;

    &:disabled {
      & + .checkbox__icon {
        background-color: $input-background-disabled;
        border-color: $input-border-rest;
      }

      & + .checkbox__icon .checkbox__tick {
        color: $checkbox-checked-foreground-disabled;
      }
    }

    &:checked {
      & + .checkbox__icon .checkbox__tick {
        display: block;
      }

      &:not(:disabled) + .checkbox__icon {
        background-color: $checkbox-checked-background-rest;
        border-color: transparent;
      }
    }

    &:focus-visible {
      outline: none;

      & + .checkbox__icon {
        outline: 4px auto highlight;
      }
    }
  }

  &:has(input:disabled) .checkbox__label {
    color: $checkbox-label-disabled;
  }

  &__toggle {
    display: flex;
    height: $checkbox-width;
  }

  &__icon {
    @include create-transition(all, default);

    display: flex;
    justify-content: center;
    align-items: center;
    flex: 1;
    min-width: 0;
    padding: 0.2rem;

    background-color: $input-background-rest;
    border-radius: $semantic-radii-x-small;
    border: 1px solid $input-border-rest;
  }

  &:hover {
    .checkbox__icon {
      border-color: $input-border-hover;
    }

    &:has(input:checked:not(:disabled)) .checkbox__icon {
      background-color: $checkbox-checked-background-hover;
    }
  }

  &__tick {
    display: none;
    height: 100%;

    color: $checkbox-checked-foreground-default;
  }

  &__label {
    font: $body-200-medium;
    user-select: none;
  }
}
